#!/usr/bin/env python3
import glob
import re

with open('/home/wpovell/.theme') as f:
    dat = f.read().strip()
colors = re.findall(r'([FBC\d]{2})\s+(\#[\da-f]{6})', dat)
toWrite = ""
for c, v in colors:
    print(c,v)
    # Get in rr/gg/bb format
    hexc = v[1:].lower()
    hexc = '/'.join(map(''.join, zip(*[iter(hexc)]*2)))
    n = ''
    fmt = lambda n, c: "\033]{};rgb:{}\007".format(n, c)
    if c == 'BC':
        toWrite += fmt('708', hexc)
        toWrite += fmt('11', hexc)
    elif c == 'CC':
        pass
    else:
        n = c.replace('C','')
        toWrite += fmt('4;'+n, hexc)

for term in glob.glob("/dev/pts/[0-9]*"):
    with open(term, "w") as file:
        file.write(toWrite)
