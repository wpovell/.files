#!/bin/bash -e

# nil if no open frame
frame=`emacsclient -s gui -e "(member \"$DISPLAY\" (mapcar 'terminal-name (frames-on-display-list)))" 2>/dev/null`

# If there is no frame open create one
[[ "$frame" == "nil" ]] && opts='-c'
opts="$opts -s gui -n"

exec emacsclient $opts "$@"
