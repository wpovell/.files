#!/bin/bash

# Edits given command arg

usage() {
    echo "ecmd SCRIPT
    Opens the script passed in emacs. Script must be under ~/bin to be found.
    "
}

case $1 in
    -h|--help) usage ;;
esac

if [[ -z $1 ]]; then
  usage
  exit
fi

FILE=$(find -L ~/bin/ -name "$(basename "$1")")
if [[ -e $FILE ]]; then
  emacs -nw "$FILE"
else
  echo "ERROR: No such script '$1'"
  echo -n "Create script? [y/n] "
  read -r ans
  if [[ "$ans" = "y" ]]; then
    FILE="$HOME/bin/$1"
    touch "$FILE"
    chmod +x "$FILE"
    emacs -nw "$FILE"
  fi
fi
